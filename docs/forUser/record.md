---
sidebar_position: 30
---

# 接続履歴
ユーザが接続し、操作した画面をキャプチャし、再生することができる。

SSH接続の履歴のみ異なる形式でも保存されており、2種類の再生方法が存在する。
再生マークがまるで囲われているものをクリックすると[履歴再生](#履歴再生)で、囲われていないものをクリックすると[Typescript再生](#typescript再生)で再生される。

また、その時点でアクティブな接続も記録されており、リアルタイムで履歴を再生することができる。
![履歴一覧](/img/RecordList.png)
## 履歴再生
画面キャプチャで履歴が保存されており、別タブで再生される。
画面をクリックすることで履歴の再生/停止を切り替えることができる。

## Typescript再生

typescriptファイルとtimingファイルで構成されており、linuxの[`scriptreplay`コマンド](https://man7.org/linux/man-pages/man1/scriptreplay.1.html)、もしくはWebUI上で中身を再生することができる。

### 操作手順

一番下のバーで再生内容を操作できる。
左から順に
- 再生/停止
- 一手巻き戻し
- 一手進める
- シークバー
- 再生時間
を表している。

また、再生時間は最後の操作があった時間が合計再生時間として表示されているので、タブを閉じて切断した場合などは履歴一覧で表示されていた再生時間と異なる場合がある。

![タイプスクリプト再生](/img/RecordTypescript.png)

### scriptreplayコマンド

Typescriptのファイルサイズが**10MB**以上の場合は、ブラウザに負荷をかけないために再生できないようになっている。

これを再生したい場合はtypescriptファイルとtimingファイルをダウンロードして再生する必要がある。再生手順を以下に記す。

1. Typescript再生ページ右上の「**テキストログ**」ボタンをクリックしてtypescriptファイルをダウンロードする。
2. 同様にその隣の「**タイミングファイル**」ボタンをクリックしってtimingファイルをダウンロードする。
3. `scriptreplay -l {typescriptファイル} -t {timingファイル}`と指定して実行することで自身の環境で履歴を再生することができる。

## 強制切断
管理者モードの時、履歴一覧からアクティブな接続を強制切断することができる。

![管理者モードの履歴一覧](/img/RecordListAdmin.png)