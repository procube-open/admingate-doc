---
sidebar_position: 30
---

# 接続履歴
ユーザが接続し操作した画面をキャプチャし、再生することができます。

SSH接続の履歴のみ異なる形式でも保存されており、2種類の再生方法が存在します。
再生マークがまるで囲われているものをクリックすると[履歴再生](#履歴再生)で、囲われていないものをクリックすると[Typescript再生](#typescript再生)で再生されます。

また、その時点でアクティブな接続も記録されており、その場合はリアルタイムで記録される履歴を再生することができます。
![履歴一覧](/img/RecordList.png)
## 履歴再生
画面キャプチャで履歴が保存されており、再生すると別タブで履歴再生が開始されます。
画面をクリックすることで履歴の再生/停止を切り替えることができます。

## Typescript再生

typescriptファイルとtimingファイルで構成されており、linuxの[`scriptreplay`コマンド](#scriptreplayコマンド)、もしくはWebUI上で中身を再生することができます。

ただし、Typescriptのファイルサイズが**10MB**以上の場合は、ブラウザに負荷をかけないために再生できないようになっています。
これを再生したい場合は[`scriptreplay`コマンド](#scriptreplayコマンド)を利用して下さい。


### 操作手順
再生ボタンを押すと全画面の再生ダイアログが表示され、一番下のバーで再生内容を操作できます。
左から順に
- 再生/停止
- 一手巻き戻し
- 一手進める
- シークバー
- 再生時間

を表しています。

![タイプスクリプト再生](/img/RecordTypescript.png)

注意点として、再生時間は最後の操作があった時間が合計再生時間として表示されています。
`exit`や`logout`コマンドによるものではなく、タブを閉じて強制切断した場合などは履歴一覧で表示されていた再生時間と異なる場合があります。
履歴の紛失があるわけではありません。

### scriptreplayコマンド

以下の手順でscriptreplayコマンドで履歴を再生することができます。
1. Typescript再生ページ右上の「**テキストログ**」ボタンをクリックしてtypescriptファイルをダウンロードする。
2. 同様にその隣の「**タイミングファイル**」ボタンをクリックしてtimingファイルをダウンロードする。
3. `scriptreplay -l {typescriptファイル} -t {timingファイル}`と指定して実行することで自身の環境で履歴を再生することができる。

## 強制切断
管理者モードの時、履歴一覧からアクティブな接続を強制切断することができます。

![管理者モードの履歴一覧](/img/RecordListAdmin.png)