---
sidebar_position: 20
---
# ディレクトリ実装
GridFSの機能としてディレクトリの機能は存在しないので、AdminGate独自の実装を行なった。
## 親ディレクトリ
ファイルの場合は`metadata.parent_id`、ディレクトリの場合は`parent_id`パラメータで親ディレクトリの特定を行う。
基本的にはこれらのパラメータには`fs.dirs`の`_id`を文字列化したものが格納される。

## ルートディレクトリ
`fs.dirs`の`parent_id`には前述した`_id`を文字列化したもの以外に`"root"`という文字列が入るものがある。
そのうち、`dirname`が`"public"`となっているものを**publicディレクトリ**、
`dirname`が作業IDになっているものを**作業ディレクトリ**、
**作業ディレクトリ**と、**publicディレクトリ**を合わせて**ルートディレクトリ**と呼ぶことにする。
ルートディレクトリ以外のディレクトリとファイルは全てルートディレクトリの配下に存在し、ルートディレクトリ以外のディレクトリを**基本ディレクトリ**と呼ぶことにする。

### 作業ディレクトリ
`dirname`に格納された作業IDの作業に対応するディレクトリ。
作業の作業者、もしくは管理者のみがアクセス可能であり、作業関係者でファイルを共有できる。

### publicディレクトリ
公開領域にあたるディレクトリ。
全てのユーザーが利用可能であり、全体で共有したいファイルが存在する場合に使われることを想定している。

