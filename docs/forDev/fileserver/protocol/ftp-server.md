---
sidebar_position: 20
---
# FTP

ベースとなるパッケージとして[`ftp-srv`](https://www.npmjs.com/package/ftp-srv)を用いる。
`metadata.accessHistory`の`Protocol`は`ftp`で記録される。

### ログイン方法
ユーザー名として作業IDを入力し、作業オブジェクトに登録されたパスワードを入力することでログインできる。
この時ファイル一覧を取得すると、ログイン時に入力した作業IDの作業ディレクトリと、publicディレクトリのみが表示されている。

もしくは、ユーザー名に`anonymous`と入力することでpublicディレクトリにのみアクセスできる形でログインできる。

また、ログイン時に送信元IPによる制限を設け、fs.worksの`whitelist`に登録されたIPのみログインを許可される。

### ルート配下
ログイン直後に`pwd`を実行すると`/` が返ってきて、`/`の配下に対しては以下のリクエストを拒否する。

- ファイルのアップロード
- ディレクトリの作成
- ルート配下ディレクトリの名前変更
- ルート配下ディレクトリの削除

### ファイル一覧（ファイルフォーマット）
ファイルフォーマットの以下の属性はMongoDBに値は持たず、固定の値を表示する。記載のない属性は、該当ディレクトリまたはファイル固有の値となる。

- uid、およびgidは`1000`とする
- mode、およびpermissionsは、作業ディレクトリとその配下にあるディレクトリとファイルは`660`、publicディレクトリとその配下にあるディレクトリとファイルは`666`とする
- ディレクトリのsizeは`0`とする
